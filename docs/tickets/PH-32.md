---
id: 32
title: "Spec: Index badge at concat time"
status: backlog
priority: low
tags:
  - spec
  - deferred
  - concat
---

# Spec: Index Badge at Concat Time

> Status: Deferred. Revisit once Phase 3 (Concatenation) is complete.

## Problem

The default overlay config includes a persistent `{index}` badge burned into each segment during render. If the user reorders rows in the CSV, every segment whose index changed needs re-rendering — even though the video content is identical.

## Idea

Instead of burning the index badge during segment render, burn it during concatenation. Segments would be rendered without the index overlay. The concat step would apply the index based on timeline position.

## Trade-offs

**Pros:**
- Reordering is cheaper (no per-segment re-render)
- Segments are position-independent and more reusable

**Cons:**
- Concat can no longer be a simple stream copy — needs per-segment overlay injection (re-encoding)
- Concat step becomes significantly more complex
- Users configure overlay timing per-profile; splitting index out requires special-casing
- Preview of a single segment won't show the index badge (misleading)

## Conclusion

Complexity cost is high and benefit is narrow (only matters when reordering). Current approach is acceptable. Revisit if re-rendering speed becomes a bottleneck.
