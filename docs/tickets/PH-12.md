---
id: 12
title: Implement concat command
status: backlog
priority: high
tags:
  - concat
  - cli
  - phase-3
---

# Implement Concat Command

Add `powerhour concat` to join rendered segments into a single final video.

## Command Interface

```bash
powerhour concat --project <dir> --out final.mp4
powerhour concat --project <dir> --out final.mp4 --reencode
powerhour concat --project <dir> --dry-run
```

## Flow

1. Resolve timeline to get ordered segment list
2. Verify all segments exist on disk
3. Generate concat list file (`.powerhour/concat.txt`)
4. Invoke FFmpeg:
   - Default: `-f concat -safe 0 -i concat.txt -c copy` (no re-encode, fast)
   - With `--reencode`: full decode/encode pass
5. Report output path, duration, file size

## Acceptance Criteria

- `powerhour concat --out final.mp4` produces a playable video
- Timeline order respected when configured
- Falls back to sorted directory order without timeline
- `--reencode` handles format-mismatched segments
- `--dry-run` shows intended order without executing
- Missing segments produce clear errors
